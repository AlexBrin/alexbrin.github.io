<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    Hello!

    <button id="sub">Подписаться</button>

    <p id="kind">???</p>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-analytics.js"></script>

    <script>
        if('serviceWorker' in navigator) {
            navigator.serviceWorker.register('firebase-messaging-sw.js', {
                scope: '*'
            })
            .then(function(registration) {
                var serviceWorker;
                if(registration.installing) {
                    serviceWorker = registration.installing;
                    document.getElementById("kind").textContent = "installing";
                } else if(registration.waiting) {
                    serviceWorker = registration.waiting;
                    document.getElementById("kind").textContent = "waiting";
                } else if(registration.active) {
                    serviceWorker = registration.active;
                    document.getElementById("kind").textContent = "active";
                }

                if(serviceWorker) {
                    serviceWorker.addEventListener('statechange', function (e) {

                    })
                }
            })
            .catch(function(err) {
                console.error(err);
            })
        } else {
            document.getElementById("kind").textContent = "service workers not supported"
        }
    </script>
</body>
</html>